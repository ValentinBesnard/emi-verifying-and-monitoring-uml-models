# Unified Verification and Monitoring of Executable UML Specifications

This repository contains the formalization in Lean (https://leanprover.github.io/) of:
- our Semantic Transition Relation (STR) interface,
- our EMI2STR adapter used to implement the STR interface with our model interpreter interface,
- our synchronous composition operator,
- our operator used to add implicit transitions.

The Lean code provided in the formalization.lean is machine-checkable. To check its validity, it can be loaded in the [Web editor of Lean].

[Web editor of Lean]: https://leanprover.github.io/live/latest/#code=%0Anamespace%20emi%0A%0Avariables%20%0A%20%20%20%20%7BC%20:%20Type%7D%20--%20configurations%0A%20%20%20%20%7BA%20:%20Type%7D%20--%20actions%0A%20%20%20%20%7BL%20:%20Type%7D%20--%20atomic%20propositions%0A%0A--%20STR%20structure%0Astructure%20STR%20:=%0A%20%20%20%20(initial%20:%20set%20C)%0A%20%20%20%20(actions%20:%20C%20%E2%86%92%20set%20A)%20%0A%20%20%20%20(execute%20:%20C%20%E2%86%92%20A%20%E2%86%92%20set%20C)%0A%0A--%20Type%20to%20know%20if%20some%20actions%20are%20available%20or%20if%20there%20is%20a%20deadlock%0Auniverse%20u%0Ainductive%20completed%20(%CE%B1%20:%20Type%20u)%0A%09%7C%20deadlock%20%7B%7D%20:%20completed%0A%09%7C%20some%20%20%20%20:%20%CE%B1%20%E2%86%92%20completed%0A%0A--%20Operator%20used%20to%20complete%20a%20STR%20by%20adding%20implicit%20transitions%0Adef%20add_implicit_transitions%0A%20%20%20%20(str%20:%20@STR%20C%20A)%0A%20%20%20%20%5B%E2%88%80%20c,%20decidable%20(str.actions%20c%20=%20%E2%88%85)%5D%0A:%20@STR%20C%20(completed%20A)%20:=%20%0A%7B%20%0A%20%20%20%20initial%20:=%20str.initial,%0A%20%20%20%20actions%20:=%20%CE%BB%20c,%20if%20str.actions%20c%20=%20%E2%88%85%20then%20%0A%20%20%20%20%20%20%20%20%20%20%20%20(singleton%20completed.deadlock)%20%0A%20%20%20%20%20%20%20%20else%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20oa%20%7C%20%E2%88%80%20a%20%E2%88%88%20str.actions%20c,%20oa%20=%20completed.some%20a%20%7D,%20%0A%20%20%20%20execute%20:=%20%CE%BB%20c%20oa,%20match%20oa%20with%0A%20%20%20%20%20%20%20%20%7C%20completed.deadlock%20%20:=%20singleton%20c%0A%20%20%20%20%20%20%20%20%7C%20completed.some%20a%20:=%20%7B%20oc%20%7C%20%E2%88%80%20t%20%E2%88%88%20str.execute%20c%20a,%20oc%20=%20t%20%7D%0A%20%20%20%20end%0A%7D%0A%0A--%20Synchronous%20composition%20operator%0Adef%20synchronous_composition%20(C%E2%82%81%20C%E2%82%82%20A%E2%82%81%20A%E2%82%82%20L%E2%82%81%20:%20Type)%0A%20%20%20%20(lhs%20:%20@STR%20C%E2%82%81%20A%E2%82%81)%0A%20%20%20%20(eval%E2%82%81%20:%20L%E2%82%81%20%E2%86%92%20C%E2%82%81%20%E2%86%92%20A%E2%82%81%20%E2%86%92%20C%E2%82%81%20%E2%86%92%20bool)%0A%20%20%20%20(rhs%20:%20@STR%20C%E2%82%82%20A%E2%82%82)%0A%20%20%20%20(eval%E2%82%82%20:%20C%E2%82%82%20%E2%86%92%20A%E2%82%82%20%E2%86%92%20L%E2%82%81)%0A:%20@STR%20(C%E2%82%81%20%C3%97%20C%E2%82%82)%20(A%E2%82%81%20%C3%97%20A%E2%82%82)%20:=%0A%7B%0A%20%20%20%20initial%20:=%20%7B%20c%20%7C%20%E2%88%80%20(c%E2%82%81%20%E2%88%88%20lhs.initial)%20(c%E2%82%82%20%E2%88%88%20rhs.initial),%20c%20=%20(c%E2%82%81,%20c%E2%82%82)%20%7D,%0A%20%20%20%20actions%20:=%20%CE%BB%20c,%20%7B%20a%20%7C%20%0A%20%20%20%20%20%20%20%20match%20c%20with%0A%20%20%20%20%20%20%20%20%7C%20(c%E2%82%81,%20c%E2%82%82)%20:=%20%E2%88%80%20(a%E2%82%81%20%E2%88%88%20lhs.actions%20c%E2%82%81)%20(a%E2%82%82%20%E2%88%88%20rhs.actions%20c%E2%82%82)%0A%20%20%20%20%20%20%20%20%20%20%20%20(t%E2%82%81%20%E2%88%88%20lhs.execute%20c%E2%82%81%20a%E2%82%81)%20(t%E2%82%82%20%E2%88%88%20rhs.execute%20c%E2%82%82%20a%E2%82%82),%0A%20%20%20%20%20%20%20%20%20%20%20%20match%20t%E2%82%81,%20t%E2%82%82%20:%20%E2%88%80%20t%E2%82%81%20t%E2%82%82,%20Prop%20with%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%7C%20t%E2%82%81,%20t%E2%82%82%20:=%20%20eval%E2%82%81%20(eval%E2%82%82%20c%E2%82%82%20a%E2%82%82)%20c%E2%82%81%20a%E2%82%81%20t%E2%82%81%20=%20tt%20%E2%86%92%20a%20=%20(a%E2%82%81,%20a%E2%82%82)%0A%20%20%20%20%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20end%20%20%20%20%0A%20%20%20%20%7D,%0A%20%20%20%20execute%20:=%20%CE%BB%20c%20a,%20%7B%20t%20%7C%20%0A%20%20%20%20%20%20%20%20match%20c,%20a%20with%20%0A%20%20%20%20%20%20%20%20%7C%20(c%E2%82%81,%20c%E2%82%82),%20(a%E2%82%81,%20a%E2%82%82)%20:=%20%20%E2%88%80%20(t%E2%82%81%20%E2%88%88%20lhs.execute%20c%E2%82%81%20a%E2%82%81)%20%0A%20%20%20%20%20%20%20%20%09(t%E2%82%82%20%E2%88%88%20rhs.execute%20c%E2%82%82%20a%E2%82%82),%20t%20=%20(t%E2%82%81,%20t%E2%82%82)%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20%7D%20%20%0A%7D%0A%0Aend%20emi%0A%0A
